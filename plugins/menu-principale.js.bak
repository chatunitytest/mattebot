import { promises as fs } from 'fs';

let handler = async (m, { conn, usedPrefix }) => {
  const botName = global.db.data.nomedelbot || "ğ•¸ğ–†ğ–™ğ–™ğ–Š ğ–‡ğ–”ğ–™âœ¦";
  const vs = global.db.data.version || '1.0.0';

  const menuText = `
â¬›â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ¬›
       âœ¦ ğŒğ„ğğ” ğğ‘ğˆğğ‚ğˆğğ€ğ‹ğ„ âœ¦  
              ğŒğ€ğ“ğ“ğ„ğğğ“
â¬›â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ¬›

ğŸ“œ ğ—–ğ—¼ğ—ºğ—®ğ—»ğ—±ğ—¶ ğ—šğ—²ğ—»ğ—²ğ—¿ğ—®ğ—¹ğ—¶:

âŸ¡ ${usedPrefix}proprietario
âŸ¡ ${usedPrefix}funzioni
âŸ¡ ${usedPrefix}admin
âŸ¡ ${usedPrefix}gruppo
âŸ¡ ${usedPrefix}owner
âŸ¡ ${usedPrefix}script
âŸ¡ ${usedPrefix}installa
âŸ¡ ${usedPrefix}crediti

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”° ğğğ“: ${botName}
ğŸ“¦ ğ•ğ„ğ‘ğ’ğˆğğğ„: ${vs}
â¬›â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ¬›
`.trim();

  const menuButtons = [
    { buttonId: `${usedPrefix}proprietario`, buttonText: { displayText: 'ğŸ‘¤ Proprietario' }, type: 1 },
    { buttonId: `${usedPrefix}funzioni`, buttonText: { displayText: 'âš™ï¸ Funzioni' }, type: 1 },
    { buttonId: `${usedPrefix}admin`, buttonText: { displayText: 'ğŸ›¡ï¸ Admin' }, type: 1 },
    { buttonId: `${usedPrefix}gruppo`, buttonText: { displayText: 'ğŸ‘¥ Gruppo' }, type: 1 },
    { buttonId: `${usedPrefix}owner`, buttonText: { displayText: 'ğŸ‘‘ Owner' }, type: 1 },
    { buttonId: `${usedPrefix}script`, buttonText: { displayText: 'ğŸ“œ Script' }, type: 1 },
    { buttonId: `${usedPrefix}installa`, buttonText: { displayText: 'ğŸ“¦ Installa' }, type: 1 },
    { buttonId: `${usedPrefix}crediti`, buttonText: { displayText: 'ğŸ’³ Crediti' }, type: 1 },
  ];

  await conn.sendMessage(m.chat, {
    text: menuText,
    buttons: menuButtons,
    headerType: 4,
    contextInfo: {
      externalAdReply: {
        title: `${botName} - ğŒğ„ğğ” ğğ‘ğˆğğ‚ğˆğğ€ğ‹ğ„`,
        body: "ğğ˜ ğŒğ€ğ“ğ“ğ„ - ğ“ğ‡ğ„ ğğ„ğ’ğ“",
        thumbnail: await fs.readFile('./storage/image/chatunity.png'),
        mediaType: 1,
        showAdAttribution: true,
        renderLargerThumbnail: true,
        // forwardingScore: 1,
        // isForwarded: true,
        forwardedNewsletterMessageInfo: {
          newsletterJid: '120363370244642449@newsletter',
          serverMessageId: '',
          newsletterName: botName
        }
      }
    }
  }, { quoted: m });
};

handler.help = ["menu"];
handler.tags = ['menu'];
handler.command = /^(menu|comandi)$/i;

export default handler;